name: test_suite_scripts_mix

inputs:
    - input <- agave://endofday.staging.storage//data/algebra.yml

outputs:
    - step_2.output
    - step_3.output

processes:
    step_1:
        app_id: endofday-local-0.0.1
        execution: agave_app
        description: Run the alegbra.yml workflow using the endofday-local Agave app.
        inputs:
            wf:
                - inputs.input
        outputs:
            - algebra/sum/data/out.txt -> sum
    step_2:
        image: jstubbs/add_n
        description: Add 5 to all inputs.
        inputs:
            - step_1.sum -> /data/input.txt
        outputs:
            - /data/output.txt -> output
        command: python add_n.py -i 5

    step_3:
        parent_dir: /some/abs/path/
        # all paths must be relative and must live within the parent_dir
        script: some/rel/path/my_notebook.ipnb
        execution: pynb
        inputs:
            - step_2.output -> some/rel/path/inputs/input_1
            - inputs.input -> some/rel/path/inputs/input_2
            - step_1.sum -> other/rel/path/sum
        outputs:
            - some/rel/path/outputs/output.txt -> output